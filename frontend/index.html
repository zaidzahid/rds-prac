<!DOCTYPE html>
<html>
<head>
    <title>Email Collector</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Email Collector</h1>
        <input type="email" id="email" placeholder="Enter email">
        <button onclick="addEmail()">Add Email</button>
        <h2>Saved Emails</h2>
        <ul id="emails"></ul>
    </div>

<script>
const api = "http:13.61.19.8:3000";

function fetchEmails() {
    fetch(api + '/emails')
        .then(res => res.json())
        .then(data => {
            const list = document.getElementById('emails');
            list.innerHTML = '';
            data.forEach(email => {
                const li = document.createElement('li');
                li.innerHTML = `${email.email} <button onclick="deleteEmail(${email.id})">Delete</button>`;
                list.appendChild(li);
            });
        });
}

function addEmail() {
    const email = document.getElementById('email').value;
    fetch(api + '/add-email', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({email})
    }).then(() => {
        document.getElementById('email').value = '';
        fetchEmails();
    });
}

function deleteEmail(id) {
    fetch(api + '/delete-email/' + id, { method: 'DELETE' })
        .then(() => fetchEmails());
}

fetchEmails();
</script>
</body>
</html>
